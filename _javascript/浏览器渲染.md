### 浏览器渲染过程

**当浏览器从服务器下载html界面之后就会对html界面进行渲染显示，一共会经历如下步骤**

1. 解析html为dom tree
2. 解析css为cssom tree（css object dom）
3. 合成dom和cssom成一颗渲染树 render tree
4. 对渲染树进行布局（layout），根据render tree计算每个节点的大小和位置，相当于画了一个草图
5. 对渲染树进行绘制，根据计算好的信息进行绘制

!> 分析

渲染过程中1,2,3速度非常快，但是4和5比较耗时，常见的有三个术语：
+ 重排和回流指的是第4步
+ 重绘指的是第5步
+ 重排意味着要重新计算节点的信息，所以一定会重绘
+ 重绘不一定重排，比喻修改颜色
+ 重绘和重排的代价会很高，所有浏览器并不会一有信息改变就会去重排和重绘，而是将多个可能的重排和重绘合并成一次执行，所有他可能是异步的

### html解析过程

浏览器自上而下的解析html，如果遇到script标签，则会立即下载并且执行，执行完成之后再去解析html，这可能是大大的延迟dom tree的生成
脚本解析会将脚本中改变dom和css的地方分别解析出来，追加到dom tree和style rules上，script的async和defer标签可改变这个情况，但是低版本浏览器不支持，建议把脚本放在</body>前

+ async 异步下载脚本  当解析碰到async时，会异步的下载脚本，不影响dom渲染，但是当脚本下载完毕后，会立即执行，此时会影响dom渲染
+ defer 异步下载延迟执行脚本，当碰到defer时，会异步下载，下载完成后，会等待dom渲染完毕后在执行脚本

### 页面的性能指标

+ 白屏时间（first Paint Time）——用户从打开页面开始到页面开始有东西呈现为止
+ 首屏时间——用户浏览器首屏内所有内容都呈现出来所花费的时间
+ 用户可操作时间(dom Interactive)——用户可以进行正常的点击、输入等操作，默认可以统计domready时间，因为通常会在这时候绑定事件操作
+ 总下载时间——页面所有资源都加载完成并呈现出来所花的时间，即页面 onload 的时间
